

    
      
  <div id="wiki-wrapper" class="page">
    <div class="d-flex flex-column flex-md-row gh-header">
      <h1 class="flex-auto min-width-0 mb-2 mb-md-0 mr-0 mr-md-2 gh-header-title">Histone.register</h1>

        <div class="mt-0 mt-lg-1 flex-shrink-0 gh-header-actions">
          <a href="#wiki-pages-box" class="d-md-none ">Jump to bottom</a>

        </div>
    </div>

    <div class="mt-2 mt-md-1 pb-3 gh-header-meta">
      Ruslan edited this page <relative-time datetime="2016-07-12T09:51:05Z" class="no-wrap" title="Jul 12, 2016, 11:51 AM GMT+2">on Jul 12, 2016</relative-time>
      ·
      <a href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.register/_history" class="muted-link">
        25 revisions
      </a>
    </div>

  <div id="wiki-content" class="mt-4">
    <div class="gutter-condensed gutter-lg flex-column flex-md-row d-flex">

  <div class="flex-shrink-0 col-12 col-md-9 mb-4 mb-md-0">
            <div id="wiki-body" class="gollum-markdown-content">
            <div class="markdown-body">
              <p>Registers virtual method that extends (add or modify method) built-in or custom Histone data type.</p>
<div class="highlight highlight-source-js"><pre><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-s1">prototypeObj</span><span class="pl-kos">,</span> <span class="pl-s1">methodName</span><span class="pl-kos">,</span> <span class="pl-s1">value</span><span class="pl-kos">[</span><span class="pl-kos">,</span> <span class="pl-s1">argType</span><span class="pl-kos">]</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-parameters" class="anchor" href="#parameters" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Parameters</h3>
<ul>
<li>
<strong>prototypeObj</strong><br>
JavaScript prototype object on which to define the method, this can be your own prototype or one of built-in data types:</li>
</ul>
<ul>
<li><a href="Base">Histone.Base.prototype</a></li>
<li><a href="Undefined">Histone.Undefined.prototype</a></li>
<li><a href="Null">Histone.Null.prototype</a></li>
<li><a href="Boolean">Histone.Boolean.prototype</a></li>
<li><a href="Number">Histone.Number.prototype</a></li>
<li><a href="String">Histone.String.prototype</a></li>
<li><a href="RegExp">Histone.RegExp.prototype</a></li>
<li><a href="Array">Histone.Array.prototype</a></li>
<li><a href="Date">Histone.Date.prototype</a></li>
<li><a href="Macro">Histone.Macro.prototype</a></li>
<li><a href="Global">Histone.Global.prototype</a></li>
</ul>
<ul>
<li>
<p><strong>methodName</strong><br>
The name of the method to be defined or modified, specified as string or magic method id: <a href="#using-histonem_get-to-specify-property-getter">Histone.M_GET</a>, <a href="#using-histonem_call-to-specify-call-handler">Histone.M_CALL</a> or <a href="#using-histonem_tojs-to-specify-tojavascript-convertor">Histone.M_TOJS</a>.</p>
</li>
<li>
<p><strong>value</strong><br>
Method handler, anything except function will be returned "as is". In case if set to <a href="#using-histoner_self-to-specify-that-method-returns-the-value-itself">Histone.R_SELF</a>, instance of a value on which called the method will be returned. If set to function, then called with following parameters:</p>
</li>
<li>
<p><strong>self</strong> - value, provided for the call.<br></p>
</li>
<li>
<p><strong>args</strong> - array of arguments.<br></p>
</li>
<li>
<p><strong>scope</strong> - instance of Histone.Processor.<br></p>
</li>
<li>
<p><strong>ret</strong> - function that should be called to return the result (set only in case of asynchronous call).</p>
</li>
<li>
<p><strong>argType</strong><br>
Desired argument type, can be set to <a href="#using-histoner_js-and-histoner_histone-to-specify-desired-argument-type">Histone.R_JS</a> (arguments will always be converted to JavaScript), defaults to <a href="#using-histoner_js-and-histoner_histone-to-specify-desired-argument-type">Histone.R_HISTONE</a>. This parameter is optional and can be omitted.</p>
</li>
</ul>
<h3>
<a id="user-content-return-value" class="anchor" href="#return-value" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Return value</h3>
<p>Returns <strong>true</strong> if the method was successfully registered and <strong>false</strong> in any other case.</p>
<h3>
<a id="user-content-basic-example" class="anchor" href="#basic-example" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Basic example</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register global method</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Global</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-s">'hello'</span><span class="pl-kos">,</span> <span class="pl-s">'world'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// world</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{global-&gt;hello}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-specify-handler-as-function" class="anchor" href="#specify-handler-as-function" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Specify handler as function</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register global method</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Global</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-s">'hello'</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-s">'Hello '</span> <span class="pl-c1">+</span> <span class="pl-s1">args</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span> <span class="pl-c1">+</span> <span class="pl-s">'!'</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// Hello world!</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{global-&gt;hello("world")}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-specify-asynchronous-handler" class="anchor" href="#specify-asynchronous-handler" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Specify asynchronous handler</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register global method</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Global</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-s">'hello'</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">,</span> <span class="pl-s1">scope</span><span class="pl-kos">,</span> <span class="pl-s1">ret</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-en">setTimeout</span><span class="pl-kos">(</span><span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
        <span class="pl-s1">ret</span><span class="pl-kos">(</span><span class="pl-s">'Hello '</span> <span class="pl-c1">+</span> <span class="pl-s1">args</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span> <span class="pl-c1">+</span> <span class="pl-s">'!'</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
    <span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-c1">1000</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// Hello world!</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{global-&gt;hello("world")}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-using-histonem_get-to-specify-property-getter" class="anchor" href="#using-histonem_get-to-specify-property-getter" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using Histone.M_GET to specify property getter</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register property getter for a String</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">String</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">M_GET</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-s1">self</span><span class="pl-kos">[</span><span class="pl-s1">args</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span><span class="pl-kos">]</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// s</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{"string"[0]}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-using-histonem_call-to-specify-call-handler" class="anchor" href="#using-histonem_call-to-specify-call-handler" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using Histone.M_CALL to specify call handler</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register property getter for a String</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">String</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">M_CALL</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-s">"hello from Histone.M_CALL"</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// hello from Histone.M_CALL</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{"string"()}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-using-histonem_tojs-to-specify-tojavascript-convertor" class="anchor" href="#using-histonem_tojs-to-specify-tojavascript-convertor" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using Histone.M_TOJS to specify toJavaScript convertor</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register custom toJavaScript convertor</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Array</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">M_TOJS</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-k">return</span> <span class="pl-s">"MY_ARRAY_AS_JS"</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// instantiate Histone.Array</span>
<span class="pl-k">var</span> <span class="pl-s1">myArray</span> <span class="pl-c1">=</span> <span class="pl-k">new</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Array</span><span class="pl-kos">;</span>
<span class="pl-c">// MY_ARRAY_AS_JS</span>
<span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-en">info</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">toJavaScript</span><span class="pl-kos">(</span><span class="pl-s1">myArray</span><span class="pl-kos">)</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-using-histoner_self-to-specify-that-method-returns-the-value-itself" class="anchor" href="#using-histoner_self-to-specify-that-method-returns-the-value-itself" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using Histone.R_SELF to specify that method returns the value itself</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// register custom toJavaScript convertor</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Array</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-s">'dummy'</span><span class="pl-kos">,</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">R_SELF</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// [1,2,3]</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{[1, 2, 3]-&gt;dummy-&gt;toJSON}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<h3>
<a id="user-content-using-histoner_js-and-histoner_histone-to-specify-desired-argument-type" class="anchor" href="#using-histoner_js-and-histoner_histone-to-specify-desired-argument-type" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Using Histone.R_JS and Histone.R_HISTONE to specify desired argument type</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-c">// convert arguments to JavaScript values</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Global</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-s">'doSomethingJS'</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-c">// argument will always be converted to JavaScript value</span>
    <span class="pl-k">return</span> <span class="pl-kos">(</span><span class="pl-s1">args</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span> <span class="pl-k">instanceof</span> <span class="pl-v">Array</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">R_JS</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// convert arguments to Histone values</span>
<span class="pl-c">// (Histone.R_HISTONE is the default value, so it's not necessary to specify it explicitly)</span>
<span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-en">register</span><span class="pl-kos">(</span><span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Global</span><span class="pl-kos">.</span><span class="pl-c1">prototype</span><span class="pl-kos">,</span> <span class="pl-s">'doSomethingHistone'</span><span class="pl-kos">,</span> <span class="pl-k">function</span><span class="pl-kos">(</span><span class="pl-s1">self</span><span class="pl-kos">,</span> <span class="pl-s1">args</span><span class="pl-kos">)</span> <span class="pl-kos">{</span>
    <span class="pl-c">// argument will always be converted to Histone value</span>
    <span class="pl-k">return</span> <span class="pl-kos">(</span><span class="pl-s1">args</span><span class="pl-kos">[</span><span class="pl-c1">0</span><span class="pl-kos">]</span> <span class="pl-k">instanceof</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">Array</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-kos">}</span><span class="pl-kos">,</span> <span class="pl-v">Histone</span><span class="pl-kos">.</span><span class="pl-c1">R_HISTONE</span><span class="pl-kos">)</span><span class="pl-kos">;</span>

<span class="pl-c">// true</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{doSomethingJS([1, 2, 3])}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span>
<span class="pl-c">// true</span>
<span class="pl-v">Histone</span><span class="pl-kos">(</span><span class="pl-s">'{{doSomethingHistone([1, 2, 3])}}'</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">render</span><span class="pl-kos">(</span><span class="pl-smi">console</span><span class="pl-kos">.</span><span class="pl-c1">info</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>

            </div>

            <div id="wiki-footer" class="mt-5 mb-0 wiki-footer gollum-markdown-content">
              <div class="Box Box--condensed bg-gray box-shadow">
                <div class="Box-body  markdown-body">
                  <h3>
<a id="user-content-more-documentation" class="anchor" href="#more-documentation" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>More documentation</h3>
<ul>
<li><a href="https://github.com/MegafonWebLab/histone-documentation">Histone documentation</a></li>
<li><a href="https://github.com/MegafonWebLab/histone-documentation/wiki">Histone reference</a></li>
<li><a href="https://github.com/MegafonWebLab/histone-javascript">JavaScript documentation</a></li>
<li><a href="https://github.com/MegafonWebLab/histone-javascript/wiki">JavaScript reference</a></li>
</ul>

                </div>
              </div>
            </div>
        </div>

</div>
    <div class="flex-shrink-0 col-12 col-md-3">
              <div class="wiki-rightbar">
          <div id="wiki-pages-box" class="mb-4 wiki-pages-box js-wiki-pages-box" role="navigation">
            
<div class="Box Box--condensed box-shadow">
  <div class="Box-header js-wiki-toggle-collapse" style="cursor: pointer">
    <h3 class="Box-title">
      <svg class="octicon octicon-triangle-down js-wiki-sidebar-toggle-display d-none" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M4.427 7.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 7H4.604a.25.25 0 00-.177.427z"></path></svg>
      <svg class="octicon octicon-triangle-right js-wiki-sidebar-toggle-display" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M6.427 4.427l3.396 3.396a.25.25 0 010 .354l-3.396 3.396A.25.25 0 016 11.396V4.604a.25.25 0 01.427-.177z"></path></svg>
      Pages <span title="30" class="Counter Counter--gray ">30</span>
    </h3>
  </div>
  <div class="d-none js-wiki-sidebar-toggle-display">
    <div class="filter-bar">
      <input type="text" id="wiki-pages-filter" class="form-control input-sm input-block js-filterable-field" placeholder="Find a Page…" aria-label="Find a Page…" autocomplete="off">
    </div>

    <ul class="m-0 p-0 list-style-none" data-filterable-for="wiki-pages-filter" data-filterable-type="substring">
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki">Home</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Array">Histone.Array</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Base">Histone.Base</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Boolean">Histone.Boolean</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.clearCache">Histone.clearCache</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Date">Histone.Date</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Global">Histone.Global</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.invoke">Histone.invoke</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.loadJSON">Histone.loadJSON</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.loadText">Histone.loadText</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Macro">Histone.Macro</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Null">Histone.Null</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Number">Histone.Number</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.RegExp">Histone.RegExp</a></strong>
        </li>
        <li class="Box-row">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.register">Histone.register</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.require">Histone.require</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.setResourceLoader">Histone.setResourceLoader</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.String">Histone.String</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.toBoolean">Histone.toBoolean</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.toHistone">Histone.toHistone</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.toJavaScript">Histone.toJavaScript</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.toJSON">Histone.toJSON</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.toNumber">Histone.toNumber</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.toString">Histone.toString</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.Undefined">Histone.Undefined</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Histone.unregister">Histone.unregister</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Template">Template</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Template.getAST">Template.getAST</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Template.getBaseURI">Template.getBaseURI</a></strong>
        </li>
        <li class="Box-row wiki-more-pages">
          <strong><a class="d-block" href="https://github.com/MegafonWebLab/histone-javascript/wiki/Template.render">Template.render</a></strong>
        </li>
        <li class="Box-row wiki-more-pages-link">
          <button type="button" class="f6 mx-auto btn-link muted-link js-wiki-more-pages-link">
            Show 15 more pages…
          </button>
        </li>
    </ul>
  </div>
</div>

          </div>

            <div class="gollum-markdown-content">
              <div class="Box Box--condensed mb-4">
                <div class="Box-body wiki-custom-sidebar markdown-body">
                  <h4>
<a id="user-content-histone" class="anchor" href="#histone" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="Home">Histone</a>
</h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.loadText">loadText</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.loadJSON">loadJSON</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.require">require</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.register">register</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.unregister">unregister</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.invoke">invoke</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setCache<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.clearCache">clearCache</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setLanguage<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.setResourceLoader">setResourceLoader</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.toJSON">toJSON</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.toString">toString</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.toNumber">toNumber</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.toBoolean">toBoolean</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.toJavaScript">toJavaScript</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.toHistone">toHistone</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Base">Base</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Undefined">Undefined</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Null">Null</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Boolean">Boolean</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Number">Number</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.String">String</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.RegExp">RegExp</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Macro">Macro</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clone<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bind<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toJavaScript<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Array">Array</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clone<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isMap<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isArray<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getLength<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;has<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getFirst<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getLast<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getValues<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getKeys<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toJavaScript<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Date">Date</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Histone.Global">Global</a></p>
<h4>
<a id="user-content-template" class="anchor" href="#template" aria-hidden="true"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><a href="Template">Template</a>
</h4>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Template.getBaseURI">getBaseURI</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Template.getAST">getAST</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="Template.render">render</a></p>

                </div>
              </div>
            </div>

          <h5 class="mt-0 mb-2">Clone this wiki locally</h5>
          <div class="width-full input-group">
            <input id="wiki-clone-url" type="text" data-autoselect="" class="form-control input-sm text-small text-gray input-monospace" aria-label="Clone URL for this wiki" value="https://github.com/MegafonWebLab/histone-javascript.wiki.git" readonly="">
            <span class="input-group-button">
              <clipboard-copy for="wiki-clone-url" aria-label="Copy to clipboard" class="btn btn-sm zeroclipboard-button" tabindex="0" role="button">
                <svg class="octicon octicon-clippy" height="16" viewBox="0 0 16 16" version="1.1" width="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg>
              </clipboard-copy>
            </span>
          </div>
        </div>

</div></div>  </div>


  </div>
